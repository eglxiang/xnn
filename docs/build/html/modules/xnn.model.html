<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Model package &mdash; xnn 2.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="xnn 2.2 documentation" href="../index.html" />
    <link rel="next" title="Nonlinearities package" href="xnn.nonlinearities.html" />
    <link rel="prev" title="Metrics package" href="xnn.metrics.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="model-package">
<h1>Model package<a class="headerlink" href="#model-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-xnn.model.model">
<span id="xnn-model-model-module"></span><h2>xnn.model.model module<a class="headerlink" href="#module-xnn.model.model" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="xnn.model.model.Model">
<em class="property">class </em><code class="descclassname">xnn.model.model.</code><code class="descname">Model</code><span class="sig-paren">(</span><em>name='model'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>The Model class stores the layers and connectivity structure of the model, and
provides utility functions for building a network from lasagne layers.  The
Model also provides methods for associating network inputs and outputs with
fields in the data dictionary.  One advantage of using the Model class over
lasagne layers is that the Model provides serialization and de-serialization.</p>
<p class="rubric">Methods</p>
<dl class="method">
<dt id="xnn.model.model.Model.add_full_net_from_layer">
<code class="descname">add_full_net_from_layer</code><span class="sig-paren">(</span><em>outlayer</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.add_full_net_from_layer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.add_full_net_from_layer" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a model from a single output layer.  This will not work for multi-output models.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>outlayer</strong> &#8211; A lasagne layer object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xnn.model.model.Model.add_layer">
<code class="descname">add_layer</code><span class="sig-paren">(</span><em>layer</em>, <em>name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.add_layer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.add_layer" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a layer to the model.  Layers should be added in a topological order: all inputs to a layer (unless it is an input layer) should be added to the model first.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>layer</strong> &#8211; A lasagne layer object</li>
<li><strong>name</strong> &#8211; The name of the layer is used to index the output of that layer in the data returned from the predict method.  Although names are generated automatically, it is generally a good idea to keep track of the names of layers whose output is important.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The lasagne layer object that was added to the network.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xnn.model.model.Model.bind_eval_output">
<code class="descname">bind_eval_output</code><span class="sig-paren">(</span><em>output_layer</em>, <em>target</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.bind_eval_output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.bind_eval_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an output layer to a list of evaluation outputs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output_layer</strong> &#8211; The layer object whose output will be considered an evaluation output.</li>
<li><strong>target</strong> &#8211; The key in the data dictionary whose value is the target for this output.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xnn.model.model.Model.bind_input">
<code class="descname">bind_input</code><span class="sig-paren">(</span><em>input_layer</em>, <em>input_key</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.bind_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.bind_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies that a particular model layer should be given input from the data dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>input_layer</strong> &#8211; The lasagne layer object to which to bind the input.</li>
<li><strong>input_key</strong> &#8211; The key in the data dictionary whose value will be passed to the input layer</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xnn.model.model.Model.bind_output">
<code class="descname">bind_output</code><span class="sig-paren">(</span><em>output_layer</em>, <em>loss_function</em>, <em>target</em>, <em>target_type='label'</em>, <em>aggregation_type='mean'</em>, <em>scale=1.0</em>, <em>is_eval_output=False</em>, <em>weight_key=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.bind_output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.bind_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies that a particular model layer should be treated as an output, which data key holds the labels for this output, and the cost function used for this output.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output_layer</strong> &#8211; The lasagne layer object that will be treated as an output.</li>
<li><strong>loss_function</strong> &#8211; The function that will be applied to this output and the target to compute the cost.</li>
<li><strong>target</strong> &#8211; The key in the data dictionary whose value is the target for this output, or the name of the layer whose output should be reconstructed.</li>
<li><strong>target_type</strong> &#8211; Either &#8216;label&#8217;, for when the target is a field in the data dictionary or &#8216;recon&#8217;, when the target is the output of another layer.</li>
<li><strong>aggregation_type</strong> &#8211; How to aggregate the cost across the examples in a batch.  Must be one of these values: &#8216;mean&#8217;, &#8216;sum&#8217;, &#8216;weighted_mean&#8217;, &#8216;weighted_sum&#8217;, &#8216;nanmean&#8217;, &#8216;nansum&#8217;, &#8216;nanweighted_mean&#8217;, &#8216;nanweighted_sum&#8217;</li>
<li><strong>scale</strong> &#8211; Scale the cost for this output by a constant.</li>
<li><strong>is_eval_output</strong> &#8211; Specify whether this output should be added to a list of evaluation outputs.</li>
<li><strong>weight_key</strong> &#8211; Key in the data dictionary whose value is the weight of each example in the batch for this output.  Only specified if <code class="xref py py-attr docutils literal"><span class="pre">aggregation_type</span></code> is a weighted type.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xnn.model.model.Model.from_dict">
<code class="descname">from_dict</code><span class="sig-paren">(</span><em>indict</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Add layers, inputs, and outputs to the current model from a dictionary representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>indict</strong> &#8211; A dictionary representation of a model.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="xnn.model.model.Model.from_dict_static">
<em class="property">static </em><code class="descname">from_dict_static</code><span class="sig-paren">(</span><em>indict</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.from_dict_static"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.from_dict_static" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a model from a dictionary representation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>indict</strong> &#8211; A dictionary representation of a model.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A model build from the dictionary.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xnn.model.model.Model.load_model">
<code class="descname">load_model</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.load_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.load_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Load model from a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fname</strong> &#8211; The filename that contains the model to be loaded.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xnn.model.model.Model.make_bound_input_layer">
<code class="descname">make_bound_input_layer</code><span class="sig-paren">(</span><em>shape</em>, <em>inputlabelkey</em>, <em>name=None</em>, <em>input_var=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.make_bound_input_layer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.make_bound_input_layer" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an input layer, add it to the model, and bind its input to a field in the data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shape</strong> &#8211; The shape of the input (as a tuple) that this layer should expect.</li>
<li><strong>inputlabelkey</strong> &#8211; The key in the data dictionary whose value should be fed to the constructed input layer.</li>
<li><strong>name</strong> &#8211; The name of the input layer</li>
<li><strong>input_var</strong> &#8211; The theano symbol that represents the input to this layer in theano&#8217;s symbolic graph.  If None, a symbol is created internally.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The lasagne layer object that was added to the network.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xnn.model.model.Model.make_dense_drop_stack">
<code class="descname">make_dense_drop_stack</code><span class="sig-paren">(</span><em>parent_layer</em>, <em>num_units_list=None</em>, <em>drop_p_list=None</em>, <em>nonlin_list=None</em>, <em>namebase=None</em>, <em>drop_type_list=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.make_dense_drop_stack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.make_dense_drop_stack" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a sequence of dense layers followed by dropout layers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parent_layer</strong> &#8211; The lasagne layer object whose outputs are the input to the first dense layer.</li>
<li><strong>num_units_list</strong> &#8211; A list of integers specifying the number of units.  The length of this list is the number of dense layers that will be added to the model.</li>
<li><strong>drop_p_list</strong> &#8211; A list of parameters for the dropout layers.  The length should be the same as <code class="xref py py-attr docutils literal"><span class="pre">num_units_list</span></code>, <code class="xref py py-attr docutils literal"><span class="pre">drop_type_list</span></code>, and <code class="xref py py-attr docutils literal"><span class="pre">nonlin_list</span></code>.  If None, all values are 0.5.</li>
<li><strong>nonlin_list</strong> &#8211; A list of nonlinearities to apply to the dense layers.  If None, all nonlinearities will be <code class="xref py py-meth docutils literal"><span class="pre">xnn.nonlinearities.rectify()</span></code></li>
<li><strong>namebase</strong> &#8211; Base name to prepend to dense and dropout layer names.</li>
<li><strong>drop_type_list</strong> &#8211; A list of strings specifying either &#8216;standard&#8217; or &#8216;gauss&#8217; for the dropout types of each layer in the stack. If None, all types are &#8216;standard&#8217;.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The lasagne layer object of the final layer added to the network by this method.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xnn.model.model.Model.make_dense_layer">
<code class="descname">make_dense_layer</code><span class="sig-paren">(</span><em>parentlayer</em>, <em>num_units</em>, <em>nonlinearity=None</em>, <em>name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.make_dense_layer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.make_dense_layer" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to both construct a lasagne dense (fully-connected) layer and add it to the model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parentlayer</strong> &#8211; The lasagne layer object whose outputs are the input to the dense layer.</li>
<li><strong>num_units</strong> &#8211; The number of units in the dense layer.</li>
<li><strong>nonlinearity</strong> &#8211; The nonlinearity function to use on this layer.  If None, <code class="xref py py-meth docutils literal"><span class="pre">xnn.nonlinearities.rectify()</span></code> is used.</li>
<li><strong>name</strong> &#8211; The name of the dense layer.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The lasagne layer object that was added to the network.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xnn.model.model.Model.make_dropout_layer">
<code class="descname">make_dropout_layer</code><span class="sig-paren">(</span><em>parentlayer</em>, <em>p=0.5</em>, <em>name=None</em>, <em>drop_type='standard'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.make_dropout_layer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.make_dropout_layer" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to both construct a lasagne dropout layer and add it to the model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parentlayer</strong> &#8211; The lasagne layer object whose outputs are the input to the dropout layer</li>
<li><strong>p</strong> &#8211; The dropout parameter.  Depending on the dropout type, this parameter means different things.  For standard dropout, this is the percent of neurons to mask.  For Gaussian dropout, this is the variance of the gaussian noise.</li>
<li><strong>name</strong> &#8211; The name of the dropout layer.</li>
<li><strong>drop_type</strong> &#8211; Either &#8216;standard or &#8216;gauss&#8217; for standard and Gaussian dropout.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The lasagne layer object that was added to the network.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xnn.model.model.Model.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>data_dict</em>, <em>layer_names=None</em>, <em>data_in_gpu=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.predict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Run data through a model and collect the output.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data_dict</strong> &#8211; A dictionary of data on which the model will run.  This dictionary must contain keys whose values were bound to the input layers of the model.</li>
<li><strong>layer_names</strong> &#8211; A list of layer names for which the output will be returned.  If None, output of all layers will be returned</li>
<li><strong>data_in_gpu</strong> &#8211; If True, data is on the gpu and the values in <code class="xref py py-attr docutils literal"><span class="pre">data_dict</span></code> are the theano shared variables that contain the data.  If False, the values in <code class="xref py py-attr docutils literal"><span class="pre">data_dict</span></code> are numpy arrays containing the data</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xnn.model.model.Model.save_model">
<code class="descname">save_model</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.save_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.save_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Save model to a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fname</strong> &#8211; The filename into which the model will be saved.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xnn.model.model.Model.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/xnn/model/model.html#Model.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xnn.model.model.Model.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary that represents this model.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Model package</a><ul>
<li><a class="reference internal" href="#module-xnn.model.model">xnn.model.model module</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="xnn.metrics.html" title="previous chapter">Metrics package</a></li>
      <li>Next: <a href="xnn.nonlinearities.html" title="next chapter">Nonlinearities package</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/modules/xnn.model.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Josh Susskind and contributors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../_sources/modules/xnn.model.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>